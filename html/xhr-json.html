<!DOCTYPE html>
<html lang="en">

<head>

<link rel="shortcut icon" href="favicon.png" type="image/x-icon">
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Test Streaming</title>

</head>

<body>

	<h1>Send test XHR JSON</h1>

	<form id="myForm" autocomplete="off">
		<label for="inName">Name:</label> <input type="text" id="inputName"
			name="inName" value="Mario" /> <br> <label for="inSurname">Surname:</label>
		<input type="text" id="inputSurname" name="inSurname" value="Rossi" />
		<br> <label for="inAge">Age:</label> <input type="number"
			id="inputAge" name="inAge" value="15" min="0" max="100" />
	</form>

	<hr>

	<button id="btnAjax">Send form (json Ajax)</button>

	<div id="results"></div>

</body>

<script>
	var xhttp;

	var url = "../php/getJson.php";

	/* Get btnAjax */
	var btnAjax = document.getElementById('btnAjax');

	/* Activate function onclick */
	btnAjax.onclick = function() {
		sendFormAjax();
	};


	/**
	 * Send the form as json with ajax 
	 */
	function sendFormAjax() {
		xhttp = new XMLHttpRequest();
		xhttp.open('POST', url, true);
		xhttp.setRequestHeader('Content-Type','application/json');
		xhttp.onload = function() {
			if (this.status >= 200 && this.status < 400) {
				var responseData = this.response;
				//alert(responseData);
				document.getElementById('results').innerHTML +=  responseData;

			} else {
				alert('Error');
			}
		};
		xhttp.send(serializeForm());
	}
	
	
	
	/**
	 * Take the value from the input and create the json
	 */
	function serializeForm() {

		var name = document.getElementById('inputName').value;
		var surname = document.getElementById('inputSurname').value;
		var age = document.getElementById('inputAge').value;

		/* Compose the json */
		var jsonData = JSON.stringify({
			"name" : name,
			"surname" : surname,
			"age" : age
		});

		return jsonData;

	}
</script>

</html>